##  监控告警

在「DevOps平台」中点击上方导航栏中「监控告警」标签，展开相应功能列表。

## 监控面板

监控面板页面包含几部分信息：

* 左侧为选择监控范围，用于选择查看监控数据的范围，集群/主机组/主机。

* 右侧为监控数据现实部分，其中有两大部分：监控概览，自定义监控。

* 「监控概览」为FIT2CLOUD系统自带的基础监控项，不能更改。

* 「自定义监控」显示用户在系统中自定义的监控项的图形。

### 基础监控指标查询

进入「监控面板」默认就会显示基础监控指标

基础监控指标包括6项数据：

* CPU使用率平均值

* 内存使用率平均值

* 网络每秒流出流量总和

* 网络每秒流入流量总和

* 一分钟平均负载均衡

* 磁盘最高使用率平均值

##  自定义监控

FIT2CLOUD系统中除了基础监控指标外，用户还可以根据自己的业务需求创建自定义监控。

###  创建自定义监控的流程：

* 点击顶部导航的「监控告警」下拉菜单中的「自定义监控」
*  在「自定义监控」页面点击「新建」
*  填写创建自定义监控的信息，包括：
   *  自定义监控名称
   *  平台：包括LInux，windows，AIX
   *  脚本类型：包括Shell,Python,perl,ruby,others
   *  监控脚本：监控的脚本代码（脚本返回值必须为整数、小数等数据类型）
   *  单位：自定义监控显示的单位
   *  描述：对该自定义监控的一个描述

###  添加自定义监控到主机组 

* 在自定义监控列表中选择一条自定义监控

* 点击「操作」列中的「添加监控」

* 在弹出的页面中勾选想要添加自定义监控的主机组

* 点击「添加监控」并手动进行告警设置

### 查看自定义监控：

* 点击顶部导航的「监控告警」下拉菜单中的「监控面板」。

* 在右侧的监控图标区域的顶部，选择「自定义监控」。

* 选择已经添加该自定义监控的主机组。

* 选择对应的自定义监控。

##  站点监控 

点击顶部导航的「监控告警」下拉菜单中的「站点监控」。添加站点监控的流程如下：

* 在「站点监控」列表页面点击「新建」，会弹出新建页面，需要填入的信息包括：

  *  监控项目名称
  *  监控类别
  *  所属集群：把这个站点监控划分到哪个集群
  *  url: 要监控站点的URL
  *  监控频率：支持的频率有1分钟，5分钟，15分钟，30分钟，60分钟
  *  触发告警的条件:触发条件有1次失败，2次失败，3次失败，5次失败，10次失败
  *  匹配相应内容 ：监控可以匹配返回值中的特定内容

##  端口监控

点击顶部导航的「监控告警」下拉菜单中的「端口监控」。

端口监控包括3种：

* 已管理公网主机的监控，添加流程如下：

   * 点击「监控已管理主机(公网)」，打开新建端口页面。
   *  选择想要添加监控的主机，点击「添加端口监控」。
   * 在弹出的页面中输入想要监控的端口。

* 已管理内网主机的监控，添加流程如下：

  *  点击「监控已管理主机(内网)」，打开新建端口页面。
  *  选择想要添加监控的主机，点击「添加端口监控」。
  *  在弹出的页面中输入想要监控的端口。

* 自定义的端口监控，添加流程如下：

  *  点击「自定义端口监控」，打开新建端口页面。
  *  输入要监控的IP地址，以逗号分隔。
  *  输入要监控的端口。

##  告警通知人、通知组设置

点击顶部导航的「监控告警」下拉菜单中的「通知人管理」。

点击「通知人」标签会显示通知人管理页面。

* **新建通知人：**
点击「新建」打开新建通知人页面，需要填入的信息如下：

  * 通知人名称
  *  邮箱
  *  手机
  *  验证码 ：填写手机号后点击「获取验证码」按钮，会收到短信，请填写短信中的验证码。

* **修改通知人：**
点击「编辑」打开编辑通知人页面，可以修改的信息包括：邮箱，手机。修改手机时需要验证手机验证码。

* **删除通知人：**
选择一条记录，点击「删除」可以删除对应的通知人。

点击「通知组」标签会显示通知组管理页面。

* **新建通知组：**
点击「新建」打开新建通知组页面，需要填入的信息如下：

  *  通知组名称
  *  邮件通知
  *  短信通知

* **修改通知组：**
点击「编辑」打开编辑通知组页面，可以修改使用邮件通知或短信通知。

* **删除通知组：**
选择一条记录，点击「删除」可以删除对应的通知组。

* **添加通知人到通知组：**
点击通知组记录最后一列「管理通知人」，弹出的页面会显示当前通知组中的所有通知人。点击「管理通知人」，弹出页面中左侧是通知组内没有的通知人，选择添加后可以添加到改通知组。

## 告警通知 

点击顶部导航的「监控告警」下拉菜单中的「告警通知」，会打开用户的所有告警列表页面。

这里会显示用户全部的告警通知，可以按3中方式过滤：通知方式、告警类型、通知组。

在每条记录的最后一列可以点击「查看详情」可以打开告警信息的详细内容页面。这里会显示告警的触发主机、发生时间、解除时间、持续时间、告警信息等内容。

## 告警设置

点击顶部导航的「监控告警」下拉菜单中的「告警设置」，会打开用户的告警设置页面。

* **新建告警设置：**
点击「新建」打开新建告警设置页面，需要填入的信息包括：

  *  告警项目：可选的告警项目包括6各基础监控指标和所有的自定义监控指标。
  *  持续时长：触发告警时监控数据达到的时长，包括3分钟、5分钟、15分钟、30分钟、1小时。
  *  统计方式：监控数据的统计方式，包括：最大值、最小值、平均值。
  *  比较方式：触发告警需要如何将监控数据于设置数据对比，包括：大于、大于等于、小于、小于等于。
  *  告警界限：触发告警的阈值
  *  错误界限：触发错误的阈值
  *  触发告警执行脚本：触发时自动执行的脚本，从脚本库中选择。
  *  触发错误执行脚本：
  *  解除告警执行脚本：解除告警时自动执行的脚本，从脚本库中选择。
  *  解除错误执行脚本：
  *  告警通知组：选择告警触发时要通知的通知组。

* **为主机组添加应用设置：**

  *  点击监控告警最后一列的「应用设置」
  *  选择想要添加告警设置的主机组
  *  点击「应用告警设置」